import{j as e,h as se,r as h,S as Q,d as k,f as ie}from"./index-CU2_kOLs.js";import{a as ce}from"./index.prod-C20Q0sNj.js";import{C as ae,P as te,A as U,c as X}from"./ProductServices-Cr3_umUf.js";import{C as Y}from"./CurrencyServices-D7bllOcu.js";import{L as re}from"./LanguageServices-J1joDgr0.js";import{n as g,a as M}from"./toast-C6v5B_PI.js";import{R as de}from"./index-7mr9-FxN.js";import{P as pe,M as ge,T as Z}from"./ParentCategory-DKrqctpp.js";import{a as me,T as ue}from"./DrawerButton-0gO4Hlg-.js";import{u as he,j as xe,l as je}from"./Layout-DRuA_42E.js";import{u as fe,E as P}from"./index.esm-DIMQlkj7.js";import{L as c}from"./LabelArea-CAL50iuc.js";import{S as A}from"./SwitchToggle-BnYDP_80.js";const Ie=({id:m,name:n,type:y,handleClick:f,isChecked:i})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:m,name:n,type:y,onChange:f,checked:i})}),Oe=({id:m,status:n,category:y,currencyStatusName:f})=>{const i=se(),{setIsUpdate:d}=h.useContext(Q),x=async r=>{var _,I;try{let a;if(n==="show"?a="hide":a="show",i.pathname==="/categories"||y){const t=await ae.updateStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname==="/products"){const t=await te.updateStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname==="/languages"){const t=await re.updateStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname==="/currencies")if(f==="status"){const t=await Y.updateEnabledStatus(r,{status:a});d(!0),g(t.message)}else{const t=await Y.updateLiveExchangeRateStatus(r,{live_exchange_rates:a});d(!0),g(t.message)}if(i.pathname==="/attributes"){const t=await U.updateStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname===`/attributes/${i.pathname.split("/")[2]}`){const t=await U.updateChildStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname==="/coupons"){const t=await X.updateStatus(r,{status:a});d(!0),g(t.message)}if(i.pathname==="/our-staff"){const t=await X.updateStaffStatus(r,{status:a});d(!0),g(t.message)}}catch(a){M(a?(I=(_=a==null?void 0:a.response)==null?void 0:_.data)==null?void 0:I.message:a==null?void 0:a.message)}};return e.jsx(ce,{onChange:()=>x(m),checked:n==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})},ee=({register:m,name:n,label:y,placeholder:f,required:i,type:d,value:x})=>e.jsx(e.Fragment,{children:e.jsx(k.Textarea,{className:"border text-sm border-gray-200 focus:border-gray-300 block w-full bg-gray-100",...m(`${n}`,{required:i?`${y} is required!`:!1}),type:d,placeholder:f,name:n,value:x,rows:"4",spellCheck:"false"})}),be=(m,n="en",y)=>{const[f,i]=h.useState(""),[d,x]=h.useState([]),r=se(),[_,I]=h.useState(""),[a,t]=h.useState(!0),[q,K]=h.useState(!0),[j,v]=h.useState([]),[z,w]=h.useState([]),[E,G]=h.useState(!1),[H,J]=h.useState(""),{isBulkDrawerOpen:N,closeBulkDrawer:S,setIsUpdate:C}=h.useContext(Q),{register:W,handleSubmit:V,watch:D,setValue:p,clearErrors:l,formState:{errors:L}}=fe(),$=async T=>{var B,s,b;try{const o={ids:m,categories:j==null?void 0:j.map(u=>u._id),category:(B=z[0])==null?void 0:B._id,productType:[E?"food":"others"],show:T.show,status:a?"show":"hide",tag:JSON.stringify(d)},O={ids:m,status:a?"show":"hide"},F={ids:m,enabled:a?"show":"hide",live_exchange_rates:q?"show":"hide"},R={ids:m,parentId:_,description:T.description,parentName:H,status:a?"show":"hide"},le={ids:m,option:T.option,status:a?"show":"hide"},oe={ids:m,currentId:y,changeId:T.groupName,status:a?"show":"hide"},ne={ids:m,startTime:T.startTime,endTime:T.endTime,status:a?"show":"hide"};if(r.pathname==="/products"){const u=await te.updateManyProducts(o);C(!0),g(u.message),S()}if(r.pathname==="/coupons"){const u=await X.updateManyCoupons(ne);C(!0),g(u.message),S()}if(r.pathname==="/languages"){const u=await re.updateManyLanguage(O);C(!0),g(u.message),S()}if(r.pathname==="/currencies"){const u=await Y.updateManyCurrencies(F);C(!0),g(u.message),S()}if(r.pathname==="/categories"||r.pathname===`/categories/${y}`){const u=await ae.updateManyCategory(R);C(!0),g(u.message),S()}if(r.pathname==="/attributes"){const u=await U.updateManyAttribute(le);C(!0),g(u.message),S()}if(r.pathname===`/attributes/${r.pathname.split("/")[2]}`){const u=await U.updateManyChildAttribute(oe);C(!0),g(u.message),S()}}catch(o){M(((b=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:b.message)||(o==null?void 0:o.message))}};return h.useEffect(()=>{if(!N){p("parent"),p("children"),p("type"),p("show"),p("name"),i(""),x([]),l("parent"),l("children"),l("type"),l("name"),p("name"),p("iso_code"),p("call_prefix"),p("currency"),p("zone"),l("name"),l("iso_code"),l("call_prefix"),l("currency"),l("zone"),l("status"),p("name"),p("iso_code"),p("country"),p("zone"),p("description"),l("name"),l("iso_code"),l("country"),l("zone"),l("status"),l("show"),l("description"),w([]),v([]);return}},[p,N,l]),h.useEffect(()=>{i(D("children"))},[D,f]),{register:W,watch:D,handleSubmit:V,onSubmit:$,errors:L,tag:d,setTag:x,published:a,setPublished:t,published2:q,setPublished2:K,checked:_,setChecked:I,selectedCategory:j,setSelectedCategory:v,defaultCategory:z,setDefaultCategory:w,selectCategoryName:H,setSelectCategoryName:J,isFoodItem:E,setIsFoodItem:G}},Ee=({ids:m,title:n,lang:y,data:f,childId:i,attributes:d,isCheck:x})=>{const{toggleBulkDrawer:r,isBulkDrawerOpen:_,closeBulkDrawer:I}=h.useContext(Q),{showingTranslateValue:a}=he(),{t}=ie(),{tag:q,setTag:K,published:j,register:v,onSubmit:z,errors:w,checked:E,setChecked:G,resetRefTwo:H,handleSubmit:J,setPublished:N,selectedCategory:S,setSelectedCategory:C,defaultCategory:W,setDefaultCategory:V,selectCategoryName:D,setSelectCategoryName:p}=be(m,y,i),l={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},L=s=>{let b=[];for(let o of s)b.push({title:a(o==null?void 0:o.name),key:o._id,children:o.children.length>0&&L(o.children)});return b},$=(s,b)=>{var o;return s._id===b?s:(o=s==null?void 0:s.children)==null?void 0:o.reduce((O,F)=>O??$(F,b),void 0)},T=s=>{var o,O;const b=x==null?void 0:x.find(F=>F===s);if((x==null?void 0:x.length)===((O=(o=f[0])==null?void 0:o.children)==null?void 0:O.length))return M("これは親カテゴリとして選択できません!");if(b!==void 0)return M("これは親カテゴリとして選択できません!");if(s===i)return M("これは親カテゴリとして選択できません!");{if(s===void 0)return;G(s);const F=f[0],R=$(F,s);p(a(R==null?void 0:R.name))}},B=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(me,{open:_,onClose:I,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:r,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(xe,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(ue,{title:`選択した ${n} を更新`,description:`リストから選択した ${n} に変更を適用`})}),e.jsx(je.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:J(z),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[n==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"カテゴリ"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(pe,{lang:y,selectedCategory:S,setSelectedCategory:C,setDefaultCategory:V})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"デフォルトカテゴリ"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ge,{displayValue:"name",isObject:!0,singleSelect:!0,ref:H,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>V(s),selectedValues:W,options:S,placeholder:"デフォルトカテゴリ"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:N,processOption:j}),e.jsx(P,{errorName:w.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:t("Product Tags")}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(de,{placeholder:"商品タグ（入力後、Enterキーを押して新しいタグを追加）",tags:q,onChange:s=>K(s)})})]})]}),n==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{...v("startTime",{required:"クーポン検証開始時間"}),label:"クーポン検証開始時間",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(P,{errorName:w.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"終了時間"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{...v("endTime",{required:"クーポンの有効期限終了時間"}),label:"クーポンの有効期限終了時間",name:"endTime",type:"datetime-local",placeholder:"終了時間"}),e.jsx(P,{errorName:w.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:N,processOption:j}),e.jsx(P,{errorName:w.published})]})]})]}),n==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})}),n==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"有効"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})}),n==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(ee,{register:v,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(P,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{readOnly:!0,...v("parent",{required:!1}),name:"parent",value:D||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:B}}),e.jsx(Z,{treeData:L(f),selectedKeys:[E],onSelect:s=>T(s[0]),motion:l,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})]}),n==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(ee,{register:v,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(P,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{readOnly:!0,...v("parent",{required:!1}),name:"parent",value:D||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:B}}),e.jsx(Z,{treeData:L(f),selectedKeys:[E],onSelect:s=>T(s[0]),motion:l,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})]}),n==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(k.Select,{name:"option",...v("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(P,{errorName:w.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})]}),n==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(k.Select,{name:"groupName",...v("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),d==null?void 0:d.map((s,b)=>e.jsx("option",{value:s._id,children:a(s==null?void 0:s.name)},b+1))]}),e.jsx(P,{errorName:w.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"公開"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:j,handleProcess:N})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(k.Button,{onClick:r,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:t("Cancel")})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(k.Button,{type:"submit",className:"h-12 w-full",children:[" ",t("Bulk Update")," ",n]})})]})]})})]})]})})};export{Ee as B,Ie as C,Oe as S,ee as T};
