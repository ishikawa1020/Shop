import{r as j,S as D,j as e,d as s,L as A,v as E,f as P}from"./index-CU2_kOLs.js";import{U as k}from"./UploadMany-MqzwiuKH.js";import{S as F,d as I,i as M}from"./Layout-DRuA_42E.js";import{T,D as U,u as B,M as R}from"./DrawerButton-0gO4Hlg-.js";import{D as L,E as Y}from"./EditDeleteButton-on8Y3x1g.js";import{T as _}from"./Tooltip-CHrqK3eg.js";import{u as q,E as u}from"./index.esm-DIMQlkj7.js";import{I as b}from"./InputArea-BIZuEPJq.js";import{L as f}from"./LabelArea-CAL50iuc.js";import{b as w}from"./ProductServices-Cr3_umUf.js";import{a as v,n as O}from"./toast-C6v5B_PI.js";import{T as V}from"./TableLoading-BZuy6X-P.js";import{N as H}from"./NotFound-CqWvhjgB.js";import{P as J}from"./PageTitle-yWCDsDLT.js";import{u as Z}from"./useAsync-B8u39IQg.js";import{u as $}from"./useFilter-BqmGAN4t.js";import{A as z}from"./AnimatedContent-BRwehZiw.js";import"./exportFromJSON-fDIoOtpr.js";import"./iconBase-CMZs39VK.js";import"./spinner-CkndCogW.js";import"./useDispatch-DNOf3xOQ.js";import"./httpService-JQLsFEdd.js";import"./AdminServices-D_Y1VEvB.js";import"./LanguageServices-J1joDgr0.js";import"./CurrencyServices-D7bllOcu.js";import"./index-C5uRs8v0.js";const G=r=>{const[o,n]=j.useState(""),[c,i]=j.useState(!1),{closeDrawer:a,setIsUpdate:h}=j.useContext(D),{register:C,handleSubmit:N,setValue:x,formState:{errors:y}}=q(),g=async d=>{var p,l;try{i(!0);const m={name:d.name,email:d.email,phone:d.phone,address:d.address};if(r){const t=await w.updateCustomer(r,m);h(!0),O(t.message),a()}i(!1)}catch(m){v(((l=(p=m==null?void 0:m.response)==null?void 0:p.data)==null?void 0:l.message)||(m==null?void 0:m.message)),a()}};return j.useEffect(()=>{r&&(async()=>{var d,p;try{const l=await w.getCustomerById(r);l&&(x("name",l.name),x("phone",l.phone),x("email",l.email),x("address",l.address))}catch(l){v(((p=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:p.message)||(l==null?void 0:l.message))}})()},[r,x]),{register:C,handleSubmit:N,onSubmit:g,errors:y,setImageUrl:n,imageUrl:o,isSubmitting:c}},K=({id:r})=>{const{register:o,handleSubmit:n,onSubmit:c,errors:i,isSubmitting:a}=G(r);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:r?e.jsx(T,{title:"顧客情報を更新",description:"こちらから顧客の必要な情報を更新してください。"}):e.jsx(T,{title:"Add Customer",description:"Add your Customer necessary information from here"})}),e.jsx(F,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:n(c),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(f,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{required:!0,register:o,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(u,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(f,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{required:!0,register:o,label:"Email",name:"email",type:"email",placeholder:"Email"}),e.jsx(u,{errorName:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(f,{label:"Phone"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:o,label:"Phone",name:"phone",type:"text",placeholder:"Phone"}),e.jsx(u,{errorName:i.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(f,{label:"Address"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:o,label:"Address",name:"address",type:"text",placeholder:"Address"}),e.jsx(u,{errorName:i.address})]})]})]}),e.jsx(U,{id:r,title:"Customer",isSubmitting:a})]})})]})},Q=({customers:r})=>{const{title:o,serviceId:n,handleModalOpen:c,handleUpdate:i}=B();return e.jsxs(e.Fragment,{children:[e.jsx(L,{id:n,title:o}),e.jsx(R,{children:e.jsx(K,{id:n})}),e.jsx(s.TableBody,{children:r==null?void 0:r.map(a=>{var h;return e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsxs("span",{className:"font-semibold uppercase text-xs",children:[" ",(h=a==null?void 0:a._id)==null?void 0:h.substring(20,24)]})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:I(a.createdAt).format("MMM D, YYYY")})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:a.name})}),e.jsxs(s.TableCell,{children:[e.jsx("span",{className:"text-sm",children:a.email})," "]}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:a.phone})}),e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex justify-end text-right",children:[e.jsxs("div",{className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600",children:[" ",e.jsx(A,{to:`/customer-order/${a._id}`,children:e.jsx(_,{id:"view",Icon:M,title:E("ViewOrder"),bgColor:"#34D399"})})]}),e.jsx(Y,{title:a.name,id:a._id,handleUpdate:i,handleModalOpen:c})]})})]},a._id)})})]})},Te=()=>{const{data:r,loading:o,error:n}=Z(w.getAllCustomers),{userRef:c,dataTable:i,serviceData:a,filename:h,isDisabled:C,setSearchUser:N,totalResults:x,resultsPerPage:y,handleSubmitUser:g,handleSelectFile:d,handleChangePage:p,handleUploadMultiple:l,handleRemoveSelectFile:m}=$(r),{t}=P(),S=()=>{N(""),c.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:t("CustomersPage")}),e.jsxs(z,{children:[e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsx("form",{onSubmit:g,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:e.jsx("div",{className:"items-center",children:e.jsx(k,{title:"Customers",exportData:r,filename:h,isDisabled:C,handleSelectFile:d,handleUploadMultiple:l,handleRemoveSelectFile:m})})})})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:g,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(s.Input,{ref:c,type:"search",name:"search",placeholder:t("CustomersPageSearchPlaceholder")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:t("Filter")})}),e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{layout:"outline",onClick:S,type:"reset",className:"px-4 md:py-1 py-2 h-12 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:t("Reset")})})})]})]})})})]}),o?e.jsx(V,{row:12,col:6,width:190,height:20}):n?e.jsx("span",{className:"text-center mx-auto text-red-500",children:n}):(a==null?void 0:a.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:t("CustomersId")}),e.jsx(s.TableCell,{children:t("CustomersJoiningDate")}),e.jsx(s.TableCell,{children:t("CustomersName")}),e.jsx(s.TableCell,{children:t("CustomersEmail")}),e.jsx(s.TableCell,{children:t("CustomersPhone")}),e.jsx(s.TableCell,{className:"text-right",children:t("CustomersActions")})]})}),e.jsx(Q,{customers:i})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:x,resultsPerPage:y,onChange:p,label:"テーブルナビゲーション"})})]}):e.jsx(H,{title:"Sorry, There are no customers right now."})]})};export{Te as default};
