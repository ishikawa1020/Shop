import{t as R,r as o,S as U,f as H,j as e,L as k,d as s}from"./index-CU2_kOLs.js";import{u as V,h as $,g as q,e as z,f as G}from"./Layout-DRuA_42E.js";import{a as J}from"./CategoryTable-Badok0We.js";import{B as K,C as O}from"./BulkActionDrawer-B3aeXq8p.js";import{D as Q}from"./EditDeleteButton-on8Y3x1g.js";import{L as W}from"./Loading-BWNOG7Zl.js";import{N as X}from"./NotFound-CqWvhjgB.js";import{P as Y}from"./PageTitle-yWCDsDLT.js";import{u as Z}from"./useAsync-B8u39IQg.js";import{u as ee}from"./useFilter-BqmGAN4t.js";import{u as se}from"./DrawerButton-0gO4Hlg-.js";import{C as te}from"./ProductServices-Cr3_umUf.js";import{A as le}from"./AnimatedContent-BRwehZiw.js";import"./iconBase-CMZs39VK.js";import"./useDispatch-DNOf3xOQ.js";import"./httpService-JQLsFEdd.js";import"./ParentCategory-DKrqctpp.js";import"./toast-C6v5B_PI.js";import"./index.esm-DIMQlkj7.js";import"./InputArea-BIZuEPJq.js";import"./LabelArea-CAL50iuc.js";import"./SwitchToggle-BnYDP_80.js";import"./index.prod-C20Q0sNj.js";import"./Uploader-kbPRPoOf.js";import"./tslib.es6-BgFQhbLt.js";import"./index-C5uRs8v0.js";import"./CurrencyServices-D7bllOcu.js";import"./LanguageServices-J1joDgr0.js";import"./index-7mr9-FxN.js";import"./spinner-CkndCogW.js";import"./AdminServices-D_Y1VEvB.js";import"./Tooltip-CHrqK3eg.js";const _e=()=>{const{id:d}=R(),[c,A]=o.useState([]),[j,P]=o.useState([]),[g,v]=o.useState(!1),[m,x]=o.useState([]),{toggleDrawer:F,lang:b}=o.useContext(U),{handleDeleteMany:S,allId:T,handleUpdateMany:B}=se(),{data:h,loading:p,error:N}=Z(te.getAllCategory),{showingTranslateValue:D}=V(),{t:l}=H();o.useEffect(()=>{var w,y;const r=(t,n,i=[])=>{for(let a of n){if(a._id===t)return i.concat(a);const f=r(t,a==null?void 0:a.children,i==null?void 0:i.concat(a));if(f)return f}},u=(t,n)=>{var i;return t._id===n?t:(i=t==null?void 0:t.children)==null?void 0:i.reduce((a,f)=>a??u(f,n),void 0)};if(!p){const t=u(h[0],d),n=r(d,(w=h[0])==null?void 0:w.children);((y=t==null?void 0:t.children)==null?void 0:y.length)>0&&(A(t==null?void 0:t.children),P(n))}},[d,p,h,c]);const{totalResults:I,resultsPerPage:E,dataTable:L,serviceData:C,handleChangePage:_}=ee(c),M=()=>{v(!g),x(c==null?void 0:c.map(r=>r._id)),g&&x([])};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:l("CategoryPageTitle")}),e.jsx(Q,{ids:T,setIsCheck:x,category:!0}),e.jsx(K,{ids:T,title:"子カテゴリー",lang:b,data:h,childId:d}),e.jsxs(le,{children:[e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(k,{to:"/categories",children:l("Categories")})}),j==null?void 0:j.map((r,u)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx($,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-emerald-500 font-semibold ",children:e.jsx(k,{to:`/categories/${r._id}`,children:D(r==null?void 0:r.name)})})]},u+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:F,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(q,{})}),l("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",style:{width:"auto"},children:e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>B(m),className:"w-full rounded-md h-12",style:{width:"max-content"},children:[e.jsx(z,{}),l("BulkAction")]})}),e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>S(m),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(G,{})}),l("Delete")]})]})})})]}),p?e.jsx(W,{loading:p}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(C==null?void 0:C.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(O,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:M,isChecked:g})}),e.jsx(s.TableCell,{children:l("catIdTbl")}),e.jsx(s.TableCell,{children:l("catIconTbl")}),e.jsx(s.TableCell,{children:l("Name")}),e.jsx(s.TableCell,{children:l("Description")}),e.jsx(s.TableCell,{className:"text-center",children:l("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:l("catActionsTbl")})]})}),e.jsx(J,{categories:L,data:h,lang:b,isCheck:m,setIsCheck:x,useParamId:d})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:I,resultsPerPage:E,onChange:_,label:"テーブルナビゲーション"})})]}):e.jsx(X,{title:"申し訳ありません。現在、属性はありません。"})]})};export{_e as default};
