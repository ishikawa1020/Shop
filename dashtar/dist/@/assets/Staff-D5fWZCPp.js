import{f as S,j as e,d as a,r as w,S as C,A as I}from"./index-CU2_kOLs.js";import{l as R,u as F,g as B}from"./Layout-DRuA_42E.js";import{u as U}from"./useAsync-B8u39IQg.js";import{u as z}from"./useFilter-BqmGAN4t.js";import{T as N,D as L,u as Z,M as v}from"./DrawerButton-0gO4Hlg-.js";import{E as j}from"./index.esm-DIMQlkj7.js";import{I as b}from"./InputArea-BIZuEPJq.js";import{u as $}from"./useStaffSubmit-DC-Xq4Y2.js";import{S as q}from"./SelectRole-fVkZlJG2.js";import{L as g}from"./LabelArea-CAL50iuc.js";import{U as J}from"./Uploader-kbPRPoOf.js";import{T as M}from"./TableLoading-BZuy6X-P.js";import{S as _}from"./Status-DX2nz8Mm.js";import{D as O,E as V}from"./EditDeleteButton-on8Y3x1g.js";import{a as G}from"./index.prod-C20Q0sNj.js";import{A as T}from"./AdminServices-D_Y1VEvB.js";import{n as H,a as K}from"./toast-C6v5B_PI.js";import{N as Q}from"./NotFound-CqWvhjgB.js";import{P as W}from"./PageTitle-yWCDsDLT.js";import{A as X}from"./AnimatedContent-BRwehZiw.js";import"./iconBase-CMZs39VK.js";import"./useDispatch-DNOf3xOQ.js";import"./httpService-JQLsFEdd.js";import"./ProductServices-Cr3_umUf.js";import"./index-C5uRs8v0.js";import"./CurrencyServices-D7bllOcu.js";import"./LanguageServices-J1joDgr0.js";import"./spinner-CkndCogW.js";import"./tslib.es6-BgFQhbLt.js";import"./Tooltip-CHrqK3eg.js";const y=({id:i})=>{const{register:t,handleSubmit:h,onSubmit:m,errors:n,imageUrl:x,setImageUrl:c,isSubmitting:p,selectedDate:o,setSelectedDate:d,handleSelectLanguage:l}=$(i),{t:s}=S();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:i?e.jsx(N,{register:t,handleSelectLanguage:l,title:s("UpdateStaff"),description:s("UpdateStaffdescription")}):e.jsx(N,{register:t,handleSelectLanguage:l,title:s("AddStaffTitle"),description:s("AddStaffdescription")})}),e.jsx(R.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(a.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:h(m),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Staff")+" "+s("Image")}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(J,{imageUrl:x,setImageUrl:c,folder:"admin"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Name")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{required:!0,register:t,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"スタッフ名"}),e.jsx(j,{errorName:n.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Email")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{required:!0,register:t,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:s("Email")}),e.jsx(j,{errorName:n.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Password")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[i?e.jsx(b,{register:t,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:s("Password")}):e.jsx(b,{required:!0,register:t,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:s("Password")}),e.jsx(j,{errorName:n.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("GlobalContactNumber")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{required:!0,register:t,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:s("FooterPhone")}),e.jsx(j,{errorName:n.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Joining Date")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{onChange:u=>d(u.target.value),label:"Joining Date",name:"joiningDate",value:o,type:"date",placeholder:s("StaffJoiningDate")}),e.jsx(j,{errorName:n.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:s("Staff Role")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(q,{register:t,label:"Role",name:"role"}),e.jsx(j,{errorName:n.role})]})]})]}),e.jsx(L,{id:i,title:"Staff",isSubmitting:p})]})})})})]})},Y=({id:i,status:t,option:h,staff:m})=>{const{setIsUpdate:n}=w.useContext(C),x=async(c,p)=>{var o,d;try{let l;t==="Active"?l="Inactive":l="Active";const s=await T.updateStaffStatus(c,{status:l});n(!0),H(s.message);return}catch(l){K(l?(d=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:d.message:l==null?void 0:l.message)}};return e.jsx(e.Fragment,{children:e.jsx(G,{onChange:()=>x(i),checked:t==="Active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},ee=({staffs:i,lang:t})=>{const{title:h,serviceId:m,handleModalOpen:n,handleUpdate:x,isSubmitting:c,handleResetPassword:p}=Z(),{showDateFormat:o,showingTranslateValue:d}=F();return e.jsxs(e.Fragment,{children:[e.jsx(O,{id:m,title:h}),e.jsx(v,{children:e.jsx(y,{id:m})}),e.jsx(a.TableBody,{children:i==null?void 0:i.map(l=>e.jsxs(a.TableRow,{children:[e.jsx(a.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(a.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:l.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:d(l==null?void 0:l.name)})})]})}),e.jsxs(a.TableCell,{children:[e.jsx("span",{className:"text-sm",children:l.email})," "]}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.phone})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm",children:o(l.joiningData)})}),e.jsx(a.TableCell,{class:"text-center",children:e.jsx("span",{className:"text-sm font-semibold",children:l==null?void 0:l.role})}),e.jsx(a.TableCell,{className:"text-center text-xs",children:e.jsx(_,{status:l.status})}),e.jsx(a.TableCell,{className:"text-center",children:e.jsx(Y,{id:l==null?void 0:l._id,staff:l,option:"staff",status:l.status})}),e.jsx(a.TableCell,{children:e.jsx(V,{id:l._id,staff:l,isSubmitting:c,handleUpdate:x,handleModalOpen:n,handleResetPassword:p,title:d(l==null?void 0:l.name)})})]},l._id))})]})},Ee=()=>{const{state:i}=w.useContext(I),{adminInfo:t}=i,{toggleDrawer:h,lang:m}=w.useContext(C),{data:n,loading:x,error:c}=U(()=>T.getAllStaff({email:t.email})),{userRef:p,setRole:o,totalResults:d,resultsPerPage:l,dataTable:s,serviceData:u,handleChangePage:A,handleSubmitUser:D}=z(n),{t:r}=S(),P=()=>{o(""),p.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{children:[r("StaffPageTitle")," "]}),e.jsx(v,{children:e.jsx(y,{})}),e.jsx(X,{children:e.jsx(a.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:D,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(a.Input,{ref:p,type:"search",name:"search",placeholder:r("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(a.Select,{onChange:f=>o(f.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,children:r("All")}),e.jsx("option",{value:"Admin",children:r("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:r("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:r("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(a.Button,{onClick:h,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(B,{})}),r("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(a.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:r("Filter")})}),e.jsx("div",{className:"w-full",children:e.jsx(a.Button,{layout:"outline",onClick:P,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:r("Reset")})})})]})]})})})}),x?e.jsx(M,{row:12,col:7,width:163,height:20}):c?e.jsx("span",{className:"text-center mx-auto text-red-500",children:c}):(u==null?void 0:u.length)!==0?e.jsxs(a.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(a.Table,{children:[e.jsx(a.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(a.TableCell,{children:r("StaffNameTbl")}),e.jsx(a.TableCell,{children:r("StaffEmailTbl")}),e.jsx(a.TableCell,{children:r("StaffContactTbl")}),e.jsx(a.TableCell,{children:r("StaffJoiningDateTbl")}),e.jsx(a.TableCell,{children:r("StaffRoleTbl")}),e.jsx(a.TableCell,{className:"text-center",children:r("OderStatusTbl")}),e.jsx(a.TableCell,{className:"text-center",children:r("PublishedTbl")}),e.jsx(a.TableCell,{className:"text-right",children:r("StaffActionsTbl")})]})}),e.jsx(ee,{staffs:s,lang:m})]}),e.jsx(a.TableFooter,{children:e.jsx(a.Pagination,{totalResults:d,resultsPerPage:l,onChange:A,label:"テーブルナビゲーション",labelDisplayedRows:({from:f,to:k,count:E})=>`${f}-${k}件目を表示（全${E}件）`})})]}):e.jsx(Q,{title:"申し訳ありませんが、現在スタッフはおりません。"})]})};export{Ee as default};
